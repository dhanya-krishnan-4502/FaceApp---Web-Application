{"ast":null,"code":"import * as tslib_1 from \"tslib\";\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\nimport { FaceDetection } from '../classes';\nimport { BOX_ANCHORS, BOX_ANCHORS_SEPARABLE, DEFAULT_MODEL_NAME, DEFAULT_MODEL_NAME_SEPARABLE_CONV, IOU_THRESHOLD, MEAN_RGB_SEPARABLE } from './const';\nvar TinyYolov2 = /** @class */function (_super) {\n  tslib_1.__extends(TinyYolov2, _super);\n  function TinyYolov2(withSeparableConvs) {\n    if (withSeparableConvs === void 0) {\n      withSeparableConvs = true;\n    }\n    var _this = this;\n    var config = Object.assign({}, {\n      withSeparableConvs: withSeparableConvs,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face']\n    }, withSeparableConvs ? {\n      anchors: BOX_ANCHORS_SEPARABLE,\n      meanRgb: MEAN_RGB_SEPARABLE\n    } : {\n      anchors: BOX_ANCHORS,\n      withClassScores: true\n    });\n    _this = _super.call(this, config) || this;\n    return _this;\n  }\n  Object.defineProperty(TinyYolov2.prototype, \"withSeparableConvs\", {\n    get: function () {\n      return this.config.withSeparableConvs;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TinyYolov2.prototype, \"anchors\", {\n    get: function () {\n      return this.config.anchors;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  TinyYolov2.prototype.locateFaces = function (input, forwardParams) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var objectDetections;\n      return tslib_1.__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/, this.detect(input, forwardParams)];\n          case 1:\n            objectDetections = _a.sent();\n            return [2 /*return*/, objectDetections.map(function (det) {\n              return new FaceDetection(det.score, det.relativeBox, {\n                width: det.imageWidth,\n                height: det.imageHeight\n              });\n            })];\n        }\n      });\n    });\n  };\n  TinyYolov2.prototype.getDefaultModelName = function () {\n    return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME;\n  };\n  TinyYolov2.prototype.extractParamsFromWeigthMap = function (weightMap) {\n    return _super.prototype.extractParamsFromWeigthMap.call(this, weightMap);\n  };\n  return TinyYolov2;\n}(TfjsImageRecognitionBase.TinyYolov2);\nexport { TinyYolov2 };","map":{"version":3,"names":["TfjsImageRecognitionBase","FaceDetection","BOX_ANCHORS","BOX_ANCHORS_SEPARABLE","DEFAULT_MODEL_NAME","DEFAULT_MODEL_NAME_SEPARABLE_CONV","IOU_THRESHOLD","MEAN_RGB_SEPARABLE","TinyYolov2","_super","tslib_1","__extends","withSeparableConvs","_this","config","Object","assign","iouThreshold","classes","anchors","meanRgb","withClassScores","call","defineProperty","prototype","get","locateFaces","input","forwardParams","detect","objectDetections","_a","sent","map","det","score","relativeBox","width","imageWidth","height","imageHeight","getDefaultModelName","extractParamsFromWeigthMap","weightMap"],"sources":["/Users/dhanya/node_modules/face-api.js/src/tinyYolov2/TinyYolov2.ts"],"sourcesContent":["import * as tf from '@tensorflow/tfjs-core';\r\nimport { Point, TfjsImageRecognitionBase, TNetInput } from 'tfjs-image-recognition-base';\r\n\r\nimport { FaceDetection } from '../classes';\r\nimport {\r\n  BOX_ANCHORS,\r\n  BOX_ANCHORS_SEPARABLE,\r\n  DEFAULT_MODEL_NAME,\r\n  DEFAULT_MODEL_NAME_SEPARABLE_CONV,\r\n  IOU_THRESHOLD,\r\n  MEAN_RGB_SEPARABLE,\r\n} from './const';\r\n\r\nexport class TinyYolov2 extends TfjsImageRecognitionBase.TinyYolov2 {\r\n\r\n  constructor(withSeparableConvs: boolean = true) {\r\n    const config = Object.assign({}, {\r\n      withSeparableConvs,\r\n      iouThreshold: IOU_THRESHOLD,\r\n      classes: ['face']\r\n    },\r\n    withSeparableConvs\r\n      ? {\r\n        anchors: BOX_ANCHORS_SEPARABLE,\r\n        meanRgb: MEAN_RGB_SEPARABLE\r\n      }\r\n      : {\r\n        anchors: BOX_ANCHORS,\r\n        withClassScores: true\r\n      }\r\n    )\r\n\r\n    super(config)\r\n  }\r\n\r\n  public get withSeparableConvs(): boolean {\r\n    return this.config.withSeparableConvs\r\n  }\r\n\r\n  public get anchors(): Point[] {\r\n    return this.config.anchors\r\n  }\r\n\r\n  public async locateFaces(input: TNetInput, forwardParams: TfjsImageRecognitionBase.ITinyYolov2Options): Promise<FaceDetection[]> {\r\n    const objectDetections = await this.detect(input, forwardParams)\r\n    return objectDetections.map(det => new FaceDetection(det.score, det.relativeBox, { width: det.imageWidth, height: det.imageHeight }))\r\n  }\r\n\r\n  protected getDefaultModelName(): string {\r\n    return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME\r\n  }\r\n\r\n  protected extractParamsFromWeigthMap(weightMap: tf.NamedTensorMap): { params: TfjsImageRecognitionBase.TinyYolov2NetParams, paramMappings: TfjsImageRecognitionBase.ParamMapping[] } {\r\n    return super.extractParamsFromWeigthMap(weightMap)\r\n  }\r\n}"],"mappings":";AACA,SAAgBA,wBAAwB,QAAmB,6BAA6B;AAExF,SAASC,aAAa,QAAQ,YAAY;AAC1C,SACEC,WAAW,EACXC,qBAAqB,EACrBC,kBAAkB,EAClBC,iCAAiC,EACjCC,aAAa,EACbC,kBAAkB,QACb,SAAS;AAEhB,IAAAC,UAAA,0BAAAC,MAAA;EAAgCC,OAAA,CAAAC,SAAA,CAAAH,UAAA,EAAAC,MAAA;EAE9B,SAAAD,WAAYI,kBAAkC;IAAlC,IAAAA,kBAAA;MAAAA,kBAAA,OAAkC;IAAA;IAA9C,IAAAC,KAAA;IACE,IAAMC,MAAM,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE;MAC/BJ,kBAAkB,EAAAA,kBAAA;MAClBK,YAAY,EAAEX,aAAa;MAC3BY,OAAO,EAAE,CAAC,MAAM;KACjB,EACDN,kBAAkB,GACd;MACAO,OAAO,EAAEhB,qBAAqB;MAC9BiB,OAAO,EAAEb;KACV,GACC;MACAY,OAAO,EAAEjB,WAAW;MACpBmB,eAAe,EAAE;KAClB,CACF;IAEDR,KAAA,GAAAJ,MAAA,CAAAa,IAAA,OAAMR,MAAM,CAAC;;EACf;EAEAC,MAAA,CAAAQ,cAAA,CAAWf,UAAA,CAAAgB,SAAA,sBAAkB;SAA7B,SAAAC,CAAA;MACE,OAAO,IAAI,CAACX,MAAM,CAACF,kBAAkB;IACvC,CAAC;;;;EAEDG,MAAA,CAAAQ,cAAA,CAAWf,UAAA,CAAAgB,SAAA,WAAO;SAAlB,SAAAC,CAAA;MACE,OAAO,IAAI,CAACX,MAAM,CAACK,OAAO;IAC5B,CAAC;;;;EAEYX,UAAA,CAAAgB,SAAA,CAAAE,WAAW,GAAxB,UAAyBC,KAAgB,EAAEC,aAA0D;;;;;;YAC1E,qBAAM,IAAI,CAACC,MAAM,CAACF,KAAK,EAAEC,aAAa,CAAC;;YAA1DE,gBAAgB,GAAGC,EAAA,CAAAC,IAAA,EAAuC;YAChE,sBAAOF,gBAAgB,CAACG,GAAG,CAAC,UAAAC,GAAG;cAAI,WAAIjC,aAAa,CAACiC,GAAG,CAACC,KAAK,EAAED,GAAG,CAACE,WAAW,EAAE;gBAAEC,KAAK,EAAEH,GAAG,CAACI,UAAU;gBAAEC,MAAM,EAAEL,GAAG,CAACM;cAAW,CAAE,CAAC;YAAjG,CAAiG,CAAC;;;;GACtI;EAEShC,UAAA,CAAAgB,SAAA,CAAAiB,mBAAmB,GAA7B;IACE,OAAO,IAAI,CAAC7B,kBAAkB,GAAGP,iCAAiC,GAAGD,kBAAkB;EACzF,CAAC;EAESI,UAAA,CAAAgB,SAAA,CAAAkB,0BAA0B,GAApC,UAAqCC,SAA4B;IAC/D,OAAOlC,MAAA,CAAAe,SAAA,CAAMkB,0BAA0B,CAAApB,IAAA,OAACqB,SAAS,CAAC;EACpD,CAAC;EACH,OAAAnC,UAAC;AAAD,CAAC,CA1C+BR,wBAAwB,CAACQ,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}