{"ast":null,"code":"import * as tf from '@tensorflow/tfjs-core';\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\nimport { sharedLayer } from './sharedLayers';\nexport function PNet(x, params) {\n  return tf.tidy(function () {\n    var out = sharedLayer(x, params, true);\n    var conv = TfjsImageRecognitionBase.convLayer(out, params.conv4_1, 'valid');\n    var max = tf.expandDims(tf.max(conv, 3), 3);\n    var prob = tf.softmax(tf.sub(conv, max), 3);\n    var regions = TfjsImageRecognitionBase.convLayer(out, params.conv4_2, 'valid');\n    return {\n      prob: prob,\n      regions: regions\n    };\n  });\n}","map":{"version":3,"names":["tf","TfjsImageRecognitionBase","sharedLayer","PNet","x","params","tidy","out","conv","convLayer","conv4_1","max","expandDims","prob","softmax","sub","regions","conv4_2"],"sources":["/Users/dhanya/node_modules/face-api.js/src/mtcnn/PNet.ts"],"sourcesContent":["import * as tf from '@tensorflow/tfjs-core';\r\nimport { TfjsImageRecognitionBase } from 'tfjs-image-recognition-base';\r\n\r\nimport { sharedLayer } from './sharedLayers';\r\nimport { PNetParams } from './types';\r\n\r\nexport function PNet(x: tf.Tensor4D, params: PNetParams): { prob: tf.Tensor4D, regions: tf.Tensor4D } {\r\n  return tf.tidy(() => {\r\n\r\n    let out = sharedLayer(x, params, true)\r\n    const conv = TfjsImageRecognitionBase.convLayer(out, params.conv4_1, 'valid')\r\n    const max = tf.expandDims(tf.max(conv, 3), 3)\r\n    const prob = tf.softmax(tf.sub(conv, max), 3) as tf.Tensor4D\r\n    const regions = TfjsImageRecognitionBase.convLayer(out, params.conv4_2, 'valid')\r\n\r\n    return { prob, regions }\r\n  })\r\n}"],"mappings":"AAAA,OAAO,KAAKA,EAAE,MAAM,uBAAuB;AAC3C,SAASC,wBAAwB,QAAQ,6BAA6B;AAEtE,SAASC,WAAW,QAAQ,gBAAgB;AAG5C,OAAM,SAAUC,IAAIA,CAACC,CAAc,EAAEC,MAAkB;EACrD,OAAOL,EAAE,CAACM,IAAI,CAAC;IAEb,IAAIC,GAAG,GAAGL,WAAW,CAACE,CAAC,EAAEC,MAAM,EAAE,IAAI,CAAC;IACtC,IAAMG,IAAI,GAAGP,wBAAwB,CAACQ,SAAS,CAACF,GAAG,EAAEF,MAAM,CAACK,OAAO,EAAE,OAAO,CAAC;IAC7E,IAAMC,GAAG,GAAGX,EAAE,CAACY,UAAU,CAACZ,EAAE,CAACW,GAAG,CAACH,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IAC7C,IAAMK,IAAI,GAAGb,EAAE,CAACc,OAAO,CAACd,EAAE,CAACe,GAAG,CAACP,IAAI,EAAEG,GAAG,CAAC,EAAE,CAAC,CAAgB;IAC5D,IAAMK,OAAO,GAAGf,wBAAwB,CAACQ,SAAS,CAACF,GAAG,EAAEF,MAAM,CAACY,OAAO,EAAE,OAAO,CAAC;IAEhF,OAAO;MAAEJ,IAAI,EAAAA,IAAA;MAAEG,OAAO,EAAAA;IAAA,CAAE;EAC1B,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}