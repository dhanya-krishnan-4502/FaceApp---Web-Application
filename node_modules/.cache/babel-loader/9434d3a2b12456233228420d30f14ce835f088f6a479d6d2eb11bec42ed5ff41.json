{"ast":null,"code":"import { draw, Point, round } from 'tfjs-image-recognition-base';\nimport { FaceExpressions } from '../faceExpressionNet';\nimport { isWithFaceDetection } from '../factories/WithFaceDetection';\nimport { isWithFaceExpressions } from '../factories/WithFaceExpressions';\nexport function drawFaceExpressions(canvasArg, faceExpressions, minConfidence, textFieldAnchor) {\n  if (minConfidence === void 0) {\n    minConfidence = 0.1;\n  }\n  var faceExpressionsArray = Array.isArray(faceExpressions) ? faceExpressions : [faceExpressions];\n  faceExpressionsArray.forEach(function (e) {\n    var expr = e instanceof FaceExpressions ? e : isWithFaceExpressions(e) ? e.expressions : undefined;\n    if (!expr) {\n      throw new Error('drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof');\n    }\n    var sorted = expr.asSortedArray();\n    var resultsToDisplay = sorted.filter(function (expr) {\n      return expr.probability > minConfidence;\n    });\n    var anchor = isWithFaceDetection(e) ? e.detection.box.bottomLeft : textFieldAnchor || new Point(0, 0);\n    var drawTextField = new draw.DrawTextField(resultsToDisplay.map(function (expr) {\n      return expr.expression + \" (\" + round(expr.probability) + \")\";\n    }), anchor);\n    drawTextField.draw(canvasArg);\n  });\n}","map":{"version":3,"names":["draw","Point","round","FaceExpressions","isWithFaceDetection","isWithFaceExpressions","drawFaceExpressions","canvasArg","faceExpressions","minConfidence","textFieldAnchor","faceExpressionsArray","Array","isArray","forEach","e","expr","expressions","undefined","Error","sorted","asSortedArray","resultsToDisplay","filter","probability","anchor","detection","box","bottomLeft","drawTextField","DrawTextField","map","expression"],"sources":["/Users/dhanya/node_modules/face-api.js/src/draw/drawFaceExpressions.ts"],"sourcesContent":["import { draw, IPoint, Point, round } from 'tfjs-image-recognition-base';\r\n\r\nimport { FaceExpressions } from '../faceExpressionNet';\r\nimport { isWithFaceDetection } from '../factories/WithFaceDetection';\r\nimport { isWithFaceExpressions, WithFaceExpressions } from '../factories/WithFaceExpressions';\r\n\r\nexport type DrawFaceExpressionsInput = FaceExpressions | WithFaceExpressions<{}>\r\n\r\nexport function drawFaceExpressions(\r\n  canvasArg: string | HTMLCanvasElement,\r\n  faceExpressions: DrawFaceExpressionsInput | Array<DrawFaceExpressionsInput>,\r\n  minConfidence = 0.1,\r\n  textFieldAnchor?: IPoint\r\n) {\r\n  const faceExpressionsArray = Array.isArray(faceExpressions) ? faceExpressions : [faceExpressions]\r\n\r\n  faceExpressionsArray.forEach(e => {\r\n    const expr = e instanceof FaceExpressions\r\n      ? e\r\n      : (isWithFaceExpressions(e) ? e.expressions : undefined)\r\n    if (!expr) {\r\n      throw new Error('drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof')\r\n    }\r\n\r\n    const sorted = expr.asSortedArray()\r\n    const resultsToDisplay = sorted.filter(expr => expr.probability > minConfidence)\r\n\r\n    const anchor = isWithFaceDetection(e)\r\n      ? e.detection.box.bottomLeft\r\n      : (textFieldAnchor || new Point(0, 0))\r\n\r\n    const drawTextField = new draw.DrawTextField(\r\n      resultsToDisplay.map(expr => `${expr.expression} (${round(expr.probability)})`),\r\n      anchor\r\n    )\r\n    drawTextField.draw(canvasArg)\r\n  })\r\n}"],"mappings":"AAAA,SAASA,IAAI,EAAUC,KAAK,EAAEC,KAAK,QAAQ,6BAA6B;AAExE,SAASC,eAAe,QAAQ,sBAAsB;AACtD,SAASC,mBAAmB,QAAQ,gCAAgC;AACpE,SAASC,qBAAqB,QAA6B,kCAAkC;AAI7F,OAAM,SAAUC,mBAAmBA,CACjCC,SAAqC,EACrCC,eAA2E,EAC3EC,aAAmB,EACnBC,eAAwB;EADxB,IAAAD,aAAA;IAAAA,aAAA,MAAmB;EAAA;EAGnB,IAAME,oBAAoB,GAAGC,KAAK,CAACC,OAAO,CAACL,eAAe,CAAC,GAAGA,eAAe,GAAG,CAACA,eAAe,CAAC;EAEjGG,oBAAoB,CAACG,OAAO,CAAC,UAAAC,CAAC;IAC5B,IAAMC,IAAI,GAAGD,CAAC,YAAYZ,eAAe,GACrCY,CAAC,GACAV,qBAAqB,CAACU,CAAC,CAAC,GAAGA,CAAC,CAACE,WAAW,GAAGC,SAAU;IAC1D,IAAI,CAACF,IAAI,EAAE;MACT,MAAM,IAAIG,KAAK,CAAC,iHAAiH,CAAC;;IAGpI,IAAMC,MAAM,GAAGJ,IAAI,CAACK,aAAa,EAAE;IACnC,IAAMC,gBAAgB,GAAGF,MAAM,CAACG,MAAM,CAAC,UAAAP,IAAI;MAAI,OAAAA,IAAI,CAACQ,WAAW,GAAGf,aAAa;IAAhC,CAAgC,CAAC;IAEhF,IAAMgB,MAAM,GAAGrB,mBAAmB,CAACW,CAAC,CAAC,GACjCA,CAAC,CAACW,SAAS,CAACC,GAAG,CAACC,UAAU,GACzBlB,eAAe,IAAI,IAAIT,KAAK,CAAC,CAAC,EAAE,CAAC,CAAE;IAExC,IAAM4B,aAAa,GAAG,IAAI7B,IAAI,CAAC8B,aAAa,CAC1CR,gBAAgB,CAACS,GAAG,CAAC,UAAAf,IAAI;MAAI,OAAGA,IAAI,CAACgB,UAAU,UAAK9B,KAAK,CAACc,IAAI,CAACQ,WAAW,CAAC,MAAG;IAAjD,CAAiD,CAAC,EAC/EC,MAAM,CACP;IACDI,aAAa,CAAC7B,IAAI,CAACO,SAAS,CAAC;EAC/B,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}